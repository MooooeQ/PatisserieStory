<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ç”œå¿ƒç‰©è¯­</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <link rel="stylesheet" href="styles.css">
    <script>
        // è°ƒè¯•æŒ‰é’®æ§åˆ¶ - æŒ‰F1æ˜¾ç¤º/éšè—
        let debugButtonsVisible = false;
        
        function toggleDebugButtons() {
            debugButtonsVisible = !debugButtonsVisible;
            const buttons = ['debugSkipBtn', 'debugPerfectBtn', 'debugGoodBtn', 'debugFailBtn'];
            
            buttons.forEach(buttonId => {
                const button = document.getElementById(buttonId);
                if (button) {
                    button.style.display = debugButtonsVisible ? 'block' : 'none';
                }
            });
            
            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            if (debugButtonsVisible) {
                console.log('ğŸ”§ è°ƒè¯•æŒ‰é’®å·²æ˜¾ç¤ºï¼ˆæŒ‰F1éšè—ï¼‰');
            } else {
                console.log('ğŸ”§ è°ƒè¯•æŒ‰é’®å·²éšè—ï¼ˆæŒ‰F1æ˜¾ç¤ºï¼‰');
            }
        }
        
        // æŒ‰F1æ˜¾ç¤º/éšè—è°ƒè¯•æŒ‰é’®
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F1') {
                e.preventDefault();
                toggleDebugButtons();
            }
        });
        
        // æ£€æµ‹å°é¢å›¾ç‰‡åŠ è½½çŠ¶æ€
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== å°é¢å›¾è°ƒè¯•ä¿¡æ¯ ===');
            
            // ä¸ºæ ‡é¢˜é¡µæ·»åŠ ç‰¹æ®Šç±»ï¼Œç§»é™¤boxèƒŒæ™¯
            const box = document.getElementById('box');
            const titlePage = document.getElementById('titlePage');
            console.log('Boxå…ƒç´ :', box);
            console.log('æ ‡é¢˜é¡µå…ƒç´ :', titlePage);
            
            if (box && titlePage) {
                box.classList.add('title-page');
                console.log('å·²æ·»åŠ title-pageç±»åˆ°box');
                console.log('BoxèƒŒæ™¯è‰²:', window.getComputedStyle(box).backgroundColor);
            }
            
            const coverImg = document.querySelector('.cover-image img');
            const coverDiv = document.querySelector('.cover-image');
            console.log('å°é¢å›¾ç‰‡å…ƒç´ :', coverImg);
            console.log('å°é¢å®¹å™¨å…ƒç´ :', coverDiv);
            
            if (coverImg) {
                console.log('å›¾ç‰‡src:', coverImg.src);
                console.log('å›¾ç‰‡å®Œæ•´URL:', coverImg.src);
                
                coverImg.onload = function() {
                    console.log('âœ… å°é¢å›¾ç‰‡åŠ è½½æˆåŠŸ');
                    console.log('å›¾ç‰‡å°ºå¯¸:', coverImg.naturalWidth, 'x', coverImg.naturalHeight);
                    
                    // æ£€æŸ¥å›¾ç‰‡çš„å®é™…æ˜¾ç¤ºçŠ¶æ€
                    const imgStyles = window.getComputedStyle(coverImg);
                    console.log('å›¾ç‰‡æ ·å¼:');
                    console.log('- width:', imgStyles.width);
                    console.log('- height:', imgStyles.height);
                    console.log('- opacity:', imgStyles.opacity);
                    console.log('- filter:', imgStyles.filter);
                    console.log('- display:', imgStyles.display);
                    console.log('- visibility:', imgStyles.visibility);
                    
                    // æ£€æŸ¥å›¾ç‰‡æ˜¯å¦çœŸçš„å¯è§
                    const rect = coverImg.getBoundingClientRect();
                    console.log('å›¾ç‰‡ä½ç½®å’Œå°ºå¯¸:', rect);
                    
                    console.log('å°é¢å›¾ç‰‡åŠ è½½æˆåŠŸ');
                };
                coverImg.onerror = function() {
                    console.log('âŒ å°é¢å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨èƒŒæ™¯');
                    console.log('å¤±è´¥URL:', coverImg.src);
                    if (coverDiv) {
                        coverDiv.style.background = 'linear-gradient(135deg, #ffb6d5 0%, #ffc0cb 50%, #dda0dd 100%)';
                        console.log('å·²è®¾ç½®å¤‡ç”¨èƒŒæ™¯');
                    }
                };
                
                // æ£€æŸ¥å›¾ç‰‡æ˜¯å¦å·²ç»åŠ è½½å®Œæˆ
                if (coverImg.complete) {
                    if (coverImg.naturalHeight !== 0) {
                        console.log('âœ… å›¾ç‰‡å·²åŠ è½½å®Œæˆ');
                        console.log('å›¾ç‰‡å®é™…å°ºå¯¸:', coverImg.naturalWidth, 'x', coverImg.naturalHeight);
                        
                        console.log('å°é¢å›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸');
                    } else {
                        console.log('âŒ å›¾ç‰‡åŠ è½½å¤±è´¥ï¼ˆnaturalHeightä¸º0ï¼‰');
                        console.log('å›¾ç‰‡src:', coverImg.src);
                        console.log('å°è¯•ç›´æ¥è®¿é—®å›¾ç‰‡URL...');
                        
                        // å°è¯•ç›´æ¥è®¿é—®å›¾ç‰‡
                        fetch(coverImg.src)
                            .then(response => {
                                console.log('å›¾ç‰‡HTTPçŠ¶æ€:', response.status);
                                if (response.ok) {
                                    console.log('å›¾ç‰‡å¯ä»¥è®¿é—®ï¼Œä½†å¯èƒ½æ ¼å¼æœ‰é—®é¢˜');
                                } else {
                                    console.log('å›¾ç‰‡æ— æ³•è®¿é—®');
                                }
                            })
                            .catch(error => {
                                console.log('å›¾ç‰‡è®¿é—®é”™è¯¯:', error);
                            });
                    }
                } else {
                    console.log('â³ å›¾ç‰‡æ­£åœ¨åŠ è½½ä¸­...');
                }
            } else {
                console.log('âŒ æœªæ‰¾åˆ°å°é¢å›¾ç‰‡å…ƒç´ ');
            }
            
            // æ£€æŸ¥CSSæ ·å¼
            if (coverDiv) {
                const styles = window.getComputedStyle(coverDiv);
                console.log('å°é¢å®¹å™¨æ ·å¼:');
                console.log('- position:', styles.position);
                console.log('- z-index:', styles.zIndex);
                console.log('- background:', styles.background);
                console.log('- display:', styles.display);
            }
        });
        
        // å¸®åŠ©æŒ‰é’®åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const helpBtn = document.getElementById('helpBtn');
            if (helpBtn) {
                helpBtn.addEventListener('click', showHelpModal);
            }
        });
        
        // æ˜¾ç¤ºå¸®åŠ©å¼¹çª—
        function showHelpModal() {
            const overlay = document.createElement('div');
            overlay.className = 'help-overlay';
            overlay.innerHTML = `
                <div class="help-content">
                    <div class="help-title">ğŸ’¡ æ¸¸æˆå¸®åŠ©</div>
                    <div class="help-text">
                        <p><strong>1ã€</strong>è‹¥æ¸¸æˆç•Œé¢å…ƒç´ æ˜¾ç¤ºè¿‡å¤§æˆ–è¿‡å°ï¼Œè¯·å°è¯•æŒ‰ä½ <span class="highlight">Ctrl</span> é”®å¹¶æ»šåŠ¨é¼ æ ‡æ»šè½®ï¼Œæˆ–è°ƒæ•´æµè§ˆå™¨çš„ç¼©æ”¾æ¯”ä¾‹è‡³åˆé€‚å¤§å°ï¼Œä»¥è·å¾—æœ€ä½³ä½“éªŒã€‚</p>
                        <p><strong>2ã€</strong>æˆ‘ä»¬ä¸ºä½ å‡†å¤‡äº†ä¸¤é¦–æ”¾æ¾çš„èƒŒæ™¯éŸ³ä¹ã€‚<span class="highlight">åŒå‡»</span>é¡µé¢å³ä¸‹è§’çš„éŸ³ç¬¦å›¾æ ‡ ğŸµï¼Œå³å¯éšæ—¶åˆ‡æ¢å“¦ï¼</p>
                    </div>
                    <button class="help-close" onclick="closeHelpModal(this)">æˆ‘çŸ¥é“äº†</button>
                </div>
            `;
            
            document.body.appendChild(overlay);
            
            // ç‚¹å‡»é®ç½©å±‚å…³é—­å¼¹çª—
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) {
                    closeHelpModal(overlay);
                }
            });
            
            // ESCé”®å…³é—­å¼¹çª—
            document.addEventListener('keydown', function escHandler(e) {
                if (e.key === 'Escape') {
                    closeHelpModal(overlay);
                    document.removeEventListener('keydown', escHandler);
                }
            });
        }
        
        // å…³é—­å¸®åŠ©å¼¹çª—
        function closeHelpModal(element) {
            const overlay = element.closest('.help-overlay') || element;
            if (overlay && overlay.parentNode) {
                overlay.parentNode.removeChild(overlay);
            }
        }
    </script>
</head>


<div id="box">
    <!-- ===== æ ‡é¢˜é¡µ ===== -->
    <div id="titlePage">
        <div class="cover-image">
            <img src="images/cover.jpg" alt="ç”œå¿ƒç‰©è¯­å°é¢" onerror="console.log('å°é¢å›¾ç‰‡åŠ è½½å¤±è´¥: images/cover.jpg'); this.style.display='none'">
        </div>
        <h1>ç”œå¿ƒç‰©è¯­</h1>
        <button class="btn" onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
        <button id="helpBtn" title="å¸®åŠ©">ï¼Ÿ</button>
        <button id="musicToggle" title="éŸ³ä¹">â™ª</button>
    </div>

    <!-- ===== æ¸¸æˆé¡µï¼ˆå‰å°ï¼‰ ===== -->
    <div id="gamePage">
        <header>
            <span>ç¬¬ <span id="round">1</span> å›åˆ Â· é¡¾å®¢ <span id="customerNo">1</span>/5</span>
            <span>ğŸ’° <span id="money">200</span> | â­ <span id="fame">0</span></span>
        </header>
        <div id="patienceBar"><div id="patienceFill"></div></div>
        <div id="customerPan" class="customer-container">
            <img class="customer-avatar" src="images/transparent.png" alt="é¡¾å®¢">
            <div id="customerWords" class="customer-words-front"></div>
            <div id="enterKitchenWrap">
                <button class="btn2" id="defaultEnterKitchenBtn" onclick="enterKitchen()">è¿›å…¥åå¨</button>
            </div>
            <!-- è°ƒè¯•æŒ‰é’®ï¼ˆé»˜è®¤éšè—ï¼ŒæŒ‰F1æ˜¾ç¤ºï¼‰ -->
            <button id="debugSkipBtn" onclick="skipRound()" title="è·³è¿‡è¿™ä¸ªå›åˆï¼ˆè°ƒè¯•ç”¨ï¼‰" style="display:none;">è·³è¿‡å›åˆ</button>
            <button id="debugPerfectBtn" onclick="testPerfect()" title="æµ‹è¯•å®Œç¾åˆ¶ä½œï¼ˆè°ƒè¯•ç”¨ï¼‰" style="display:none;">å®Œç¾åˆ¶ä½œ</button>
            <button id="debugGoodBtn" onclick="testGood()" title="æµ‹è¯•æ™®é€šåˆ¶ä½œï¼ˆè°ƒè¯•ç”¨ï¼‰" style="display:none;">æ™®é€šåˆ¶ä½œ</button>
            <button id="debugFailBtn" onclick="testFail()" title="æµ‹è¯•å¤±è´¥åˆ¶ä½œï¼ˆè°ƒè¯•ç”¨ï¼‰" style="display:none;">å¤±è´¥åˆ¶ä½œ</button>
            <!-- è¯„ä»·é˜¶æ®µå¤ç”¨åŒä¸€å®¹å™¨æ˜¾ç¤ºæˆå“ä¸ç¡®è®¤æŒ‰é’® -->
            <div id="dishResult" class="dish-result" style="display:none;">
                <div id="dishImage" class="dish-image"></div>
                <div id="dishName" class="dish-name"></div>
            </div>
            <button id="evalOkBtn" class="btn" style="display:none;" onclick="closeEval()">å¥½çš„</button>
            
        </div>
        <!-- æŸœå°å‰æ™¯ï¼ˆè¦†ç›–åœ¨ç«‹ç»˜ä¹‹ä¸Šã€å¯¹è¯/æŒ‰é’®/æˆå“ä¹‹ä¸‹ï¼‰ -->
        <div class="counter-overlay" aria-hidden="true"></div>
    </div>

    <!-- ===== åå¨é¡µ ===== -->
    <div id="kitchenPage">
        <button id="recipeBtn" onclick="toggleRecipe()">èœè°±</button>
        <div id="ingrList"></div>
        <div id="mixBowl">æ‹–å…¥3ç§é…æ–™</div>
        <button id="bakeBtn" onclick="goBake()" disabled>å¼€å§‹çƒ˜ç„™</button>
        <!-- çƒ˜ç„™é®ç½©ï¼ˆåŒé¡µç»å¯¹å±…ä¸­ï¼‰ -->
        <div id="bakeCover" style="display:none;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0);flex-direction:column;align-items:center;justify-content:center;">
            <canvas id="ringCanvas" width="720" height="720"></canvas>
            <button id="bakeStopBtn" onclick="stopRing()">åœï¼</button>
        </div>
    </div>

</div>     <!-- #box ç»“æŸ -->

<!-- è¯„ä»·é¡µç»“æ„å·²åˆå¹¶åˆ° #gamePage ä¸­ï¼Œä¿ç•™è„šæœ¬å¼•ç”¨åœ¨åŒé¡µåˆ‡æ¢çŠ¶æ€ -->

<script src="script.js"></script>
</body>
</html>